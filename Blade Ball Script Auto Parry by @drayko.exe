local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Mad by @drayko.exe | Blade Ball Hub",
   LoadingTitle = "Carregando script...",
   LoadingSubtitle = "by drayko",
   Theme = "Ocean" 
})

local _G = {
    autoParry = false,
    reactionTime = 0.55,
    isParried = false
}

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VIM = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer

-- [ A LÓGICA QUE VOCÊ MANDOU - TOTALMENTE INTOCADA ]
local function GetBall()
    -- Busca direta no Workspace para evitar erro de pasta
    for _, Ball in ipairs(workspace:GetDescendants()) do
        if Ball:IsA("BasePart") and (Ball:GetAttribute("realBall") or Ball:FindFirstChild("zoomies")) then
            return Ball
        end
    end
    return nil
end

RunService.PreSimulation:Connect(function()
    if not _G.autoParry then return end
    
    local char = player.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local ball = GetBall()
    if ball then
        local target = ball:GetAttribute("target")
        local zoomies = ball:FindFirstChild("zoomies")
        
        if target == player.Name and not _G.isParried and zoomies then
            local speed = zoomies.VectorVelocity.Magnitude
            local distance = (hrp.Position - ball.Position).Magnitude
            
            -- LÓGICA BRUTA ORIGINAL
            if speed > 0 and (distance / speed) <= _G.reactionTime then
                VIM:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                VIM:SendKeyEvent(true, Enum.KeyCode.F, false, game)
                
                _G.isParried = true
                task.delay(0.1, function() _G.isParried = false end)
            end
        end
    end
end)

---
-- CONFIGURAÇÃO DAS ABAS
---

local TabCombat = Window:CreateTab("Combate", 4483362458)

TabCombat:CreateToggle({
   Name = "Auto-Parry Ativado",
   CurrentValue = false,
   Callback = function(v) _G.autoParry = v end,
})

TabCombat:CreateSlider({
   Name = "Reaction Time",
   Range = {0.1, 1.2},
   Increment = 0.01,
   CurrentValue = 0.55,
   Callback = function(v) _G.reactionTime = v end,
})

local TabExtra = Window:CreateTab("Extras", 4483362458)

TabExtra:CreateSlider({
   Name = "WalkSpeed",
   Range = {16, 200},
   Increment = 1,
   CurrentValue = 16,
   Callback = function(v)
       if player.Character and player.Character:FindFirstChild("Humanoid") then
           player.Character.Humanoid.WalkSpeed = v
       end
   end,
})

-- ABA SOCIAL (PEDIDA)
local TabSocial = Window:CreateTab("Social", 4483362458)

TabSocial:CreateSection("Apoie o Desenvolvedor")

TabSocial:CreateButton({
    Name = "TikTok: @drayko.exe",
    Callback = function()
        setclipboard("@drayko.exe")
        Rayfield:Notify({
            Title = "Copiado!",
            Content = "Usuário do TikTok copiado.",
            Duration = 3,
            Image = 4483362458,
        })
    end
})

TabSocial:CreateButton({
    Name = "Entrar no Discord",
    Callback = function()
        setclipboard("https://discord.gg/EqTyzs4S")
        Rayfield:Notify({
            Title = "Link Copiado!",
            Content = "Link do Discord copiado para o clipboard.",
            Duration = 3,
            Image = 4483362458,
        })
    end
})
